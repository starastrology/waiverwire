{% load static %}
<head>
<title>Upgrade to Pro</title>
    <meta charset="UTF-8" />
    <meta name="description" content="A website dedicated to major and minor league baseball transactions.">
    <meta name="keywords" content="MLB, baseball, major league, minor leagues, majors, minors, transactions, trades, options, free agents, players, waivers, signings, signing">
    <meta name="author" content="Dan Frecka">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" href="{% static 'da_wire/favicon.ico' %}"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
 
  <script src="https://js.braintreegateway.com/web/dropin/1.32.0/js/dropin.min.js"></script>
  <script src="https://js.braintreegateway.com/web/3.82.0/js/client.min.js"></script>
<script src="https://js.braintreegateway.com/web/3.82.0/js/data-collector.min.js"></script>
  
<style>
@import url('https://fonts.googleapis.com/css2?family=Ubuntu:wght@300&display=swap');	
	body{
	    font-family: 'Ubuntu', sans-serif;
	}         
.button {
  cursor: pointer;
  font-weight: 500;
  left: 3px;
  line-height: inherit;
  position: relative;
  text-decoration: none;
  text-align: center;
  border-style: solid;
  border-width: 1px;
  border-radius: 3px;
  -webkit-appearance: none;
  -moz-appearance: none;
  display: inline-block;
}

.button--small {
  padding: 10px 20px;
  font-size: 0.875rem;
}

.button--green {
  outline: none;
  background-color: #64d18a;
  border-color: #64d18a;
  color: white;
  transition: all 200ms ease;
}

.button--green:hover {
  background-color: #8bdda8;
  color: white;
}
</style>
</head>
<body>
	{% include 'da_wire/header.html' %}
	<div class="container">
		{% if errors %}
		<div id="errors">
			<h3>Errors</h3>
			<ul>
			{% for error in errors %}
			<li>{{error.message}}</li>	
			{% endfor %}
			</ul>
		</div>
		{% endif %}
		<form id="payment-form" action="{% url 'checkout' %}" method="POST">
			{% csrf_token %}
			<div id="dropin-container"></div>
			<button id="submit-button" class="button button--small button--green">Purchase</button>
			<input type="hidden" id="nonce" name="payment_method_nonce"/>
  			<input type="hidden" id="device_data" name="device_data"/>
		</form>	
<p style="font-size:35px;">
		With Pro, you gain the ability to view, upvote/downvote, and create transaction proposals including trades, options, callups, and Free Agent signings! Play GM with this all new feature. Plus, you can post comments for discussion of transactions and players! One time fee. No returns.
	</p>

	</div>
	<script>
	var button = document.querySelector('#submit-button');
	const form = document.getElementById('payment-form');

	braintree.dropin.create({
		authorization: '{{client_token}}',
  		selector: '#dropin-container'
	}).then((dropinInstance) => {
  		form.addEventListener('submit', (event) => {
    		event.preventDefault();
		dropinInstance.requestPaymentMethod(function (err, payload) {
			document.getElementById('nonce').value = payload.nonce;
      			//return braintree.dataCollectocreate({
    			//	client: dropinInstance
  			//}).then(function (dataCollectorInstance) {
    			//	var deviceData = dataCollectorInstance.deviceData;
			//	document.getElementById('device_data').value = deviceData;
				form.submit();
			//});
    		});
  		})
	});

  </script>

	{% include 'da_wire/footer.html' %}
</body>
